```{r include=FALSE, cache=FALSE}
# Description: Boilerplate setup for each chapter
# Usage: Add to the '_bookdown.yml' `before_chapter_script:` list
# Author: Jerid Francom
# Date: 2018-12-12

# Libraries

library(knitr) # for table output
library(tidyverse) # for general workflow tools
library(EBImage) # for displaying images as figures

# Options
theme_set(theme_minimal()) # set global ggplot theme
opts_chunk$set(fig.align = 'center', # center all figures
               out.width = '75%', # limit figure widths
               cache = TRUE, # cache code chunks
               warning = FALSE, # no warnings
               message = FALSE, # no messages
               error = FALSE) # no errors

# Description: Create glossary entries
# Usage: see functions below
# Author: Jerid Francom
# Date: 2018-02-20

initGlossary <- function(glossary = "main") {
  # Function to initialize a blank glossary
  init <- tibble::tribble(~term, ~definition, ~reference) # create structure
  glossary_path <- paste0("glossaries/", glossary, ".csv") # create path
  readr::write_csv(init, glossary_path) # initialize blank glossary
}

enterGlossary <- function(term, definition, reference, glossary = "main") {
  # Function to add an entry to an existing glossary
  entry <- tibble::tibble(term, definition, reference) # add data
  glossary_path <- paste0("glossaries/", glossary, ".csv") # create path
  readr::write_csv(entry, glossary_path, append = TRUE) # append data
  paste0("**_", term, "_**") # return `term` in bold (markdown)
}

returnGlossary <- function(glossary = "main") {
  # Function to read, sort, format, and return a set of glossary entries
  glossary_path <- paste0("glossaries/", glossary, ".csv") # create path
  glossary <- readr::read_csv(file = glossary_path) # read entries
  glossary <- as.data.frame(dplyr::arrange(glossary, term)) # sort entries
  list <- lapply(1:nrow(glossary), function(i) { # format entries
    paste0("<dt>**_", tools::toTitleCase(glossary[i, 1]), "_**</dt>",
           "<dd>", glossary[i, 2], " (See section \\@ref(", glossary[i, 3], ")) </dd>")
  })
  vec <- do.call(what = "c", args = list) # flatten entries
  cat("<dl>", vec, "</dl>") # wrap for display and return
}
# Description: Create taxonomy entries
# Usage: see functions below
# Author: Jerid Francom
# Date: 2018-03-01

initTaxonomy <- function(type) {
  # Function to initialize a blank taxonomy
  init <- tibble::tribble(~name, ~description, ~reference) # create structure
  taxonomy_path <- paste0("taxonomies/", type, ".csv") # create path
  readr::write_csv(init, taxonomy_path) # initialize blank taxonomy
}

enterTaxonomy <- function(name, reference, type, description = "") {
  # Function to add an entry to an existing taxonomy
  entry <- tibble::tibble(tools::toTitleCase(name), description, reference) # add data
  taxonomy_path <- paste0("taxonomies/", type, ".csv") # create path
  readr::write_csv(entry, taxonomy_path, append = TRUE) # append data
  paste0('<span class="', type, '">', tools::toTitleCase(name), '</span>') # return `name` in bubble (markdown)
}

returnTaxonomy <- function(type) {
  # Function to read, sort, format, and return a set of taxonomy entries
  library(tidyverse, quietly = TRUE)
  # Read and arrange taxonomy entries
  taxonomy_path <- paste0("taxonomies/", type, ".csv") # create path
  taxonomy <-
    readr::read_csv(file = taxonomy_path) %>%  # read entries
    arrange(name, description, reference) # arrange entries

  # Fill NAs with taxonomy description
  taxonomy <-
    taxonomy %>%
    group_by(name) %>%
    fill(description) %>% # fill (down, after sorted)
    ungroup()

  # Summarize references with ref syntax for markdown
  taxonomy <-
    taxonomy %>%
    group_by(name, description) %>%
    mutate(references = paste0("\\@ref(", sort(reference), ")", collapse = ", ")) %>%
    select(-reference) %>%
    unique %>%
    ungroup() %>%
    as.data.frame()

  # Clean up taxonomies with no descriptions
  taxonomy <-
    taxonomy %>%
    replace_na(list(description = ""))

  list <- lapply(1:nrow(taxonomy), function(i) { # format entries
    paste0("<dt>**_", tools::toTitleCase(taxonomy[i, 1]), "_**</dt>",
           "<dd>", taxonomy[i,2], " (See section(s): ", taxonomy[i, 3], ")) </dd>")
  })
  vec <- do.call(what = "c", args = list) # flatten entries
  cat("<dl>", vec, "</dl>") # wrap for display and return
}
```
# Applications {#applications}

Some _significant_ applications are demonstrated in this chapter.

## Example one

## Example two
